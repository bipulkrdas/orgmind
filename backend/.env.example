# =============================================================================
# OrgMind Backend Environment Configuration
# =============================================================================
# This file contains all required environment variables for the OrgMind backend.
# Copy this file to .env and fill in your actual values.
# NEVER commit the .env file with real credentials to version control.
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
# Port on which the backend HTTP server will listen
# Default: 8080
SERVER_PORT=8080

# Server host address (use 0.0.0.0 to listen on all interfaces)
# Default: localhost
SERVER_HOST=localhost

# Environment mode: development, staging, or production
# Affects logging verbosity and error detail exposure
# Default: development
ENVIRONMENT=development

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database?sslmode=disable
# Required: Yes
# Example: postgresql://orgmind_user:secure_password@localhost:5432/orgmind?sslmode=disable
# Note: Use sslmode=require in production environments
DATABASE_URL=postgresql://user:password@localhost:5432/orgmind?sslmode=disable

# Maximum number of open database connections
# Default: 25
DB_MAX_OPEN_CONNS=25

# Maximum number of idle database connections
# Default: 5
DB_MAX_IDLE_CONNS=5

# Maximum lifetime of a database connection in minutes
# Default: 5
DB_CONN_MAX_LIFETIME_MINUTES=5

# -----------------------------------------------------------------------------
# JWT Authentication Configuration
# -----------------------------------------------------------------------------
# Secret key for signing JWT tokens
# Required: Yes
# IMPORTANT: Use a strong random string (minimum 32 characters) in production
# Generate with: openssl rand -base64 32
JWT_SECRET=your-secret-key-here-change-this-in-production

# Token expiration time in hours
# Default: 24
# Recommended: 24 for development, 1-2 for production with refresh tokens
JWT_EXPIRATION_HOURS=24

# JWT issuer identifier (typically your domain)
# Default: orgmind
JWT_ISSUER=orgmind

# -----------------------------------------------------------------------------
# AWS S3 Storage Configuration
# -----------------------------------------------------------------------------
# AWS region where your S3 bucket is located
# Required: Yes
# Example: us-east-1, us-west-2, eu-west-1
AWS_REGION=us-east-1

# AWS access key ID for S3 access
# Required: Yes
# Obtain from AWS IAM console
AWS_ACCESS_KEY_ID=your-aws-access-key-id

# AWS secret access key for S3 access
# Required: Yes
# Obtain from AWS IAM console
# IMPORTANT: Keep this secret secure
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key

# S3 bucket name for document storage
# Required: Yes
# Note: Bucket must exist and have appropriate permissions
# Recommended: Use private ACL with IAM-based access
AWS_S3_BUCKET=orgmind-documents

# S3 endpoint URL (optional, for S3-compatible services like MinIO)
# Leave empty for AWS S3
# Example for MinIO: http://localhost:9000
AWS_S3_ENDPOINT=

# Enable S3 path-style addressing (required for MinIO)
# Default: false
AWS_S3_PATH_STYLE=false

# -----------------------------------------------------------------------------
# Zep Cloud Configuration
# -----------------------------------------------------------------------------
# API key for Zep Cloud authentication
# Required: Yes
# Obtain from: https://www.getzep.com/
# Used for knowledge graph creation and memory management
ZEP_API_KEY=z_1dWlkIjoiYmVjYTZhMTEtMzk2Ny00ZTU5LTg4NjctYzUxNDJmMmFjZWZmIn0.nBtcux03H20DDG4KnIBuAoNCBYJ-sgp1t2tKQ0P0b9NeD1Kv9BYvrum_Yv0BrMq83TrXVsf_LKn4CzFYSti8og

# Zep Cloud API endpoint
# Default: https://api.getzep.com/api/v2
# Note: Only change if using a self-hosted Zep instance
ZEP_API_URL=https://api.getzep.com/api/v2

# Zep request timeout in seconds
# Default: 30
ZEP_TIMEOUT_SECONDS=30

# Maximum retry attempts for Zep API calls
# Default: 3
ZEP_MAX_RETRIES=3

# -----------------------------------------------------------------------------
# OAuth - Google Configuration
# -----------------------------------------------------------------------------
# Google OAuth 2.0 client ID
# Required: For Google authentication
# Obtain from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id

# Google OAuth 2.0 client secret
# Required: For Google authentication
# Obtain from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Google OAuth scopes (space-separated)
# Default: openid email profile
GOOGLE_OAUTH_SCOPES=openid email profile

# -----------------------------------------------------------------------------
# OAuth - Okta Configuration
# -----------------------------------------------------------------------------
# Okta domain (without https://)
# Required: For Okta authentication
# Example: your-company.okta.com
OKTA_DOMAIN=your-okta-domain

# Okta OAuth 2.0 client ID
# Required: For Okta authentication
# Obtain from Okta admin console
OKTA_CLIENT_ID=your-okta-client-id

# Okta OAuth 2.0 client secret
# Required: For Okta authentication
# Obtain from Okta admin console
OKTA_CLIENT_SECRET=your-okta-client-secret

# Okta authorization server ID
# Default: default
OKTA_AUTH_SERVER_ID=default

# -----------------------------------------------------------------------------
# OAuth - Office365 Configuration
# -----------------------------------------------------------------------------
# Microsoft Azure AD (Office365) application client ID
# Required: For Office365 authentication
# Obtain from: https://portal.azure.com/ > App registrations
OFFICE365_CLIENT_ID=your-office365-client-id

# Microsoft Azure AD (Office365) application client secret
# Required: For Office365 authentication
# Obtain from: https://portal.azure.com/ > App registrations
OFFICE365_CLIENT_SECRET=your-office365-client-secret

# Microsoft Azure AD tenant ID
# Default: common (allows any Microsoft account)
# Use specific tenant ID for organization-only access
OFFICE365_TENANT_ID=common

# -----------------------------------------------------------------------------
# OAuth Redirect Configuration
# -----------------------------------------------------------------------------
# URL where OAuth providers will redirect after authentication
# Required: Yes
# Format: https://yourdomain.com/auth/callback
# Development: http://localhost:3000/auth/callback
# Production: https://orgmind.com/auth/callback
# Note: Must match the redirect URI configured in OAuth provider settings
OAUTH_REDIRECT_URL=http://localhost:3000/auth/callback

# -----------------------------------------------------------------------------
# Email Configuration (for password reset)
# -----------------------------------------------------------------------------
# SMTP server host
# Required: For password reset emails
# Example: smtp.gmail.com, smtp.sendgrid.net
SMTP_HOST=smtp.gmail.com

# SMTP server port
# Default: 587 (TLS), 465 (SSL)
SMTP_PORT=587

# SMTP username (usually your email address)
# Required: For password reset emails
SMTP_USERNAME=your-email@example.com

# SMTP password or API key
# Required: For password reset emails
SMTP_PASSWORD=your-smtp-password

# Email address to send from
# Default: Same as SMTP_USERNAME
SMTP_FROM_EMAIL=noreply@orgmind.com

# Email sender name
# Default: OrgMind
SMTP_FROM_NAME=OrgMind

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
# Maximum file upload size in megabytes
# Default: 50
MAX_UPLOAD_SIZE_MB=50

# Allowed file types for upload (comma-separated MIME types)
# Default: text/plain,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document
ALLOWED_FILE_TYPES=text/plain,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# Document chunk size for Zep processing (in characters)
# Default: 10000
# Note: Zep has a maximum chunk size limit
DOCUMENT_CHUNK_SIZE=10000

# Document chunk overlap size (in characters)
# Default: 200
# Used to maintain context between chunks
DOCUMENT_CHUNK_OVERLAP=200

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Allowed origins for CORS (comma-separated)
# Development: http://localhost:3000
# Production: https://orgmind.com
CORS_ALLOWED_ORIGINS=http://localhost:3000

# Allow credentials in CORS requests
# Default: true
CORS_ALLOW_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: debug, info, warn, error
# Default: info
LOG_LEVEL=info

# Log format: json or text
# Default: json (recommended for production)
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
# Enable rate limiting
# Default: true
RATE_LIMIT_ENABLED=true

# Maximum requests per minute per user
# Default: 100
RATE_LIMIT_REQUESTS_PER_MINUTE=100

# Rate limit window in minutes
# Default: 1
RATE_LIMIT_WINDOW_MINUTES=1
